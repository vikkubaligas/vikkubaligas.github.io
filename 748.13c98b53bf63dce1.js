"use strict";(self.webpackChunkaxen=self.webpackChunkaxen||[]).push([[748],{4748:(Pt,w,r)=>{r.r(w),r.d(w,{CustomerModule:()=>St});var p=r(6895),m=r(4006),v=r(9299),k=r(3238),T=r(9186),A=r(5017),D=r(8739),Z=r(6308),g=r(1561),u=r(5938);class h{constructor(a){this.amountProgress={progress:0,color:"",color2:""},this.id=a.id||"",this.name=a.name||"",this.company=a.company||"",this.contactPerson1=a.contactPerson1||"",this.phone1=a.phone1||"",this.contactPerson2=a.contactPerson2||"",this.phone2=a.phone2||"",this.place=a.place||"",this.address=a.address||"",this.pending=a.pending||0,this.received=a.received||0,this.ePending=a.ePending||0,this.eReceived=a.eReceived||0,this.total=this.getPending()+this.getReceived(),this.calculateProgress()}getPending(){return this.ePending+this.pending}getReceived(){return this.eReceived+this.received}calculateProgress(){this.total=this.getPending()+this.getReceived(),this.amountProgress.progress=Math.trunc(this.getReceived()/this.total*100);const a=this.amountProgress.progress;this.amountProgress.color=a<50?"danger":a<90?"warning":"success",this.amountProgress.color2=a<90?"warn":"primary"}}var t=r(4650),f=r(1135),b=r(529),M=r(2340);let _=(()=>{class n extends T.n{constructor(e){super(),this.httpClient=e,this.API_URL=M.N.apiUrl+"/customers",this.isTblLoading=!0,this.dataChange=new f.X([]),this.genId=new f.X(""),this.newGen=new f.X(new h({})),this.errors=new f.X({})}get data(){return this.dataChange.value}getDialogData(){return this.dialogData}getAllAdvanceTables(){this.subs.sink=this.httpClient.get(this.API_URL).subscribe({next:e=>{e=e.map(i=>Object.assign(new h(i),i)),this.isTblLoading=!1,this.dataChange.next(e)},error:e=>{this.isTblLoading=!1,console.log(e)}})}addAdvanceTable(e){const i=new b.WM;i.append("Content-Type","application/json"),this.httpClient.post(this.API_URL,e,{headers:i}).subscribe({next:o=>{o.id?(this.dialogData=o,this.newGen.next(this.dialogData)):this.errors.next(o)},error:o=>{this.errors.next(o)}})}updateAdvanceTable(e,i){this.httpClient.put(this.API_URL+"/"+e,i).subscribe({next:o=>{o.name?(this.dialogData=o,this.newGen.next(this.dialogData)):this.errors.next(o)},error:o=>{this.errors.next(o)}})}deleteAdvanceTable(e){this.httpClient.delete(this.API_URL+"/"+e).subscribe({next:i=>{},error:i=>{console.log(i)}})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(b.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var C=r(4859);let G=(()=>{class n{constructor(e,i,o){if(this.dialogRef=e,this.data=i,this.tableService=o,this.dispData={text1:"",value1:"",text2:"",value2:"",text3:"",value3:""},"cust"==i.type){this.dispData.text1="Customer Name:",this.dispData.text2="Payments:",this.dispData.text3="";const l=new h(i.generator);this.dispData.value1=l.name+" , "+l.company,this.dispData.value2="\u20b9"+l.getReceived()+" of \u20b9"+l.total+" received, \u20b9"+l.getPending()+" pending.",this.dispData.value3=""}}onNoClick(){this.dialogRef.close()}confirmDelete(){this.tableService.deleteAdvanceTable(this.data.delId)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.so),t.Y36(u.WI),t.Y36(_))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete"]],decls:25,vars:7,consts:[[1,"container"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"clearfix"],[1,"fw-bold"],["mat-dialog-actions","",1,"mb-1"],["mat-flat-button","","color","warn",3,"mat-dialog-close","click"],["mat-flat-button","","tabindex","-1",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2,"Are you sure?"),t.qZA(),t.TgZ(3,"div",2)(4,"ul",3)(5,"li")(6,"p")(7,"span",4),t._uU(8),t.qZA(),t._uU(9),t.qZA()(),t.TgZ(10,"li")(11,"p")(12,"span",4),t._uU(13),t.qZA(),t._uU(14),t.qZA()(),t.TgZ(15,"li")(16,"p")(17,"span",4),t._uU(18),t.qZA(),t._uU(19),t.qZA()()()(),t.TgZ(20,"div",5)(21,"button",6),t.NdJ("click",function(){return i.confirmDelete()}),t._uU(22," Delete "),t.qZA(),t.TgZ(23,"button",7),t.NdJ("click",function(){return i.onNoClick()}),t._uU(24,"Cancel"),t.qZA()()()),2&e&&(t.xp6(8),t.Oqu(i.dispData.text1),t.xp6(1),t.Oqu(i.dispData.value1),t.xp6(4),t.Oqu(i.dispData.text2),t.xp6(1),t.Oqu(i.dispData.value2),t.xp6(4),t.Oqu(i.dispData.text3),t.xp6(1),t.hij("",i.dispData.value3," "),t.xp6(2),t.Q6J("mat-dialog-close",1))},dependencies:[C.lW,u.ZT,u.uh,u.xY,u.H8]}),n})();var J=r(4968),R=r(6451),Y=r(6035),I=r(4004),N=r(7009),d=r(7155),U=r(7392),y=r(6709),L=r(1572),E=r(266),S=r(1299),q=r(3162);const Q=["filter"];function F(n,a){if(1&n&&(t.TgZ(0,"div",56),t._UZ(1,"app-breadcrumb",57),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("title",e.title)("items",e.items)("active_item",e.active)}}function B(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-header-cell",58)(1,"mat-checkbox",59),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw();return t.KtG(o?s.masterToggle():null)}),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("ngClass","tbl-col-width-per-6"),t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("ngClass","tbl-checkbox")}}function O(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell",58)(1,"mat-checkbox",60),t.NdJ("click",function(o){return o.stopPropagation()})("change",function(o){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(o?c.selection.toggle(l):null)}),t.qZA()()}if(2&n){const e=a.$implicit,i=t.oxw();t.Q6J("ngClass","tbl-col-width-per-6"),t.xp6(1),t.Q6J("checked",i.selection.isSelected(e))("ngClass","tbl-checkbox")}}function H(n,a){1&n&&(t.TgZ(0,"mat-header-cell",61),t._uU(1,"Name"),t.qZA())}function $(n,a){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.name)}}function j(n,a){1&n&&(t.TgZ(0,"mat-header-cell",61),t._uU(1,"Place"),t.qZA())}function K(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell",62),t.NdJ("contextmenu",function(o){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onContextMenu(o,l))}),t.TgZ(1,"span",63),t._uU(2,"Place:"),t.qZA(),t._uU(3),t.qZA()}if(2&n){const e=a.$implicit;t.xp6(3),t.Oqu(e.place)}}function X(n,a){1&n&&(t.TgZ(0,"mat-header-cell",61),t._uU(1,"Address"),t.qZA())}function z(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell",62),t.NdJ("contextmenu",function(o){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onContextMenu(o,l))}),t.TgZ(1,"span",63),t._uU(2,"Address:"),t.qZA(),t._uU(3),t.qZA()}if(2&n){const e=a.$implicit;t.xp6(3),t.Oqu(e.address)}}function V(n,a){1&n&&(t.TgZ(0,"mat-header-cell",61),t._uU(1,"Generators"),t.qZA())}function W(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell",62),t.NdJ("contextmenu",function(o){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onContextMenu(o,l))}),t.TgZ(1,"span",63),t._uU(2,"Generators"),t.qZA(),t._uU(3,"None"),t.qZA()}}function tt(n,a){1&n&&(t.TgZ(0,"mat-header-cell",61),t._uU(1,"Pending (\u20b9)"),t.qZA())}function et(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell",62),t.NdJ("contextmenu",function(o){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onContextMenu(o,l))}),t.TgZ(1,"span",63),t._uU(2,"Pending (\u20b9):"),t.qZA(),t._uU(3),t.qZA()}if(2&n){const e=a.$implicit;t.xp6(3),t.hij(" ",e.getPending()," ")}}function nt(n,a){1&n&&(t.TgZ(0,"mat-header-cell",61),t._uU(1,"Received (\u20b9)"),t.qZA())}function it(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell",62),t.NdJ("contextmenu",function(o){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onContextMenu(o,l))}),t.TgZ(1,"span",63),t._uU(2,"Received (\u20b9):"),t.qZA(),t._uU(3),t.qZA()}if(2&n){const e=a.$implicit;t.xp6(3),t.hij(" ",e.getReceived()," ")}}function ot(n,a){1&n&&(t.TgZ(0,"mat-header-cell",61),t._uU(1,"Receivables"),t.qZA())}function at(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell",62),t.NdJ("contextmenu",function(o){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onContextMenu(o,l))}),t.TgZ(1,"span",63),t._uU(2,"Receivables:"),t.qZA(),t.TgZ(3,"mat-progress-bar",64),t._uU(4),t.qZA()()}if(2&n){const e=a.$implicit;t.xp6(3),t.Q6J("value",e.amountProgress.progress)("color",e.amountProgress.color2),t.xp6(1),t.hij(" ",e.getPending()," ")}}function st(n,a){1&n&&(t.TgZ(0,"mat-header-cell",61),t._uU(1,"Total (\u20b9)"),t.qZA())}function rt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell",62),t.NdJ("contextmenu",function(o){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onContextMenu(o,l))}),t.TgZ(1,"span",63),t._uU(2,"Total (\u20b9):"),t.qZA(),t._uU(3),t.qZA()}if(2&n){const e=a.$implicit;t.xp6(3),t.hij(" ",e.total," ")}}function lt(n,a){1&n&&(t.TgZ(0,"mat-header-cell",65),t._uU(1,"Actions"),t.qZA())}function ct(n,a){1&n&&(t.TgZ(0,"mat-cell",65)(1,"button",66),t.NdJ("click",function(i){return i.stopPropagation()}),t._UZ(2,"i",58),t.qZA(),t.TgZ(3,"button",66),t.NdJ("click",function(i){return i.stopPropagation()}),t._UZ(4,"i",58),t.qZA(),t.TgZ(5,"button",66),t.NdJ("click",function(i){return i.stopPropagation()}),t._UZ(6,"i",58),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("ngClass","fas fa-history card-icon col-orange font-18"),t.xp6(2),t.Q6J("ngClass","fas fa-truck-loading card-icon col-orange font-18"),t.xp6(2),t.Q6J("ngClass","fas fa-rupee-sign card-icon col-orange font-18"))}function mt(n,a){1&n&&t._UZ(0,"mat-header-row")}function dt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-row",67),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.viewCall(s))}),t.qZA()}2&n&&t.Udp("cursor","pointer")}function ut(n,a){1&n&&(t.TgZ(0,"div",68),t._UZ(1,"mat-progress-spinner",69),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",40))}function pt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",70),t.NdJ("click",function(){const s=t.CHM(e).item,l=t.oxw();return t.KtG(l.editCall(s))}),t.TgZ(1,"mat-icon"),t._uU(2,"create"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"button",70),t.NdJ("click",function(){const s=t.CHM(e).item,l=t.oxw();return t.KtG(l.deleteItem(s))}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA(),t.TgZ(8,"span"),t._uU(9),t.qZA()()}if(2&n){const e=a.item;t.xp6(4),t.hij("Edit ",e.name,""),t.xp6(5),t.hij("Delete ",e.name,"")}}function ht(n,a){if(1&n&&(t.TgZ(0,"div",71),t._uU(1," No results "),t.qZA()),2&n){const e=t.oxw();t.Udp("display",0===e.dataSource.renderedData.length?"":"none")}}const gt=function(){return[5,10,25,100]};let ft=(()=>{class n extends T.n{constructor(e,i,o,s,l){super(),this.httpClient=e,this.dialog=i,this.customerService=o,this.snackBar=s,this.router=l,this.displayedColumns=["select","name","place","address","generators","pending","received","total","percentage","actions"],this.selection=new A.Ov(!0,[]),this.breadscrums=[{title:"Customers",items:["Customers"],active:"All"}],this.contextMenuPosition={x:"0px",y:"0px"}}ngOnInit(){this.loadData()}refresh(){this.loadData()}addNew(){this.router.navigateByUrl("/customers/new",{state:{customer:this.customer,action:"add"}})}viewCall(e){this.id=e.id,this.router.navigateByUrl("/customers/new",{state:{id:e.id,customer:e,action:"view"}})}editCall(e){this.id=e.id,this.router.navigateByUrl("/customers/new",{state:{id:e.id,customer:e,action:"edit"}})}deleteItem(e){this.id=e.id;const i=this.dialog.open(G,{data:{action:"del",generator:e,type:"cust",delId:e.id}});this.subs.sink=i.afterClosed().subscribe(o=>{if(1===o){const s=this.exampleDatabase?.dataChange.value.findIndex(l=>l.id===this.id);null!=s&&this.exampleDatabase&&(this.exampleDatabase.dataChange.value.splice(s,1),this.refreshTable(),this.showNotification("snackbar-danger","Delete Record Successfully...!!!","bottom","center"))}})}refreshTable(){this.paginator._changePageSize(this.paginator.pageSize)}isAllSelected(){return this.selection.selected.length===this.dataSource.renderedData.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.renderedData.forEach(e=>this.selection.select(e))}removeSelectedRows(){const e=this.selection.selected.length;this.selection.selected.forEach(i=>{const o=this.dataSource.renderedData.findIndex(s=>s===i);this.exampleDatabase?.dataChange.value.splice(o,1),this.refreshTable(),this.selection=new A.Ov(!0,[])}),this.showNotification("snackbar-danger",e+" Record Delete Successfully...!!!","bottom","center")}loadData(){this.exampleDatabase=new _(this.httpClient),this.dataSource=new _t(this.exampleDatabase,this.paginator,this.sort),this.subs.sink=(0,J.R)(this.filter.nativeElement,"keyup").subscribe(()=>{this.dataSource&&(this.dataSource.filter=this.filter.nativeElement.value)})}showNotification(e,i,o,s){this.snackBar.open(i,"",{duration:2e3,verticalPosition:o,horizontalPosition:s,panelClass:e})}exportExcel(){const e=this.dataSource.filteredData.map(i=>({"Generator ID":i.id}));Y.c.exportToExcel(e,"excel")}onContextMenu(e,i){e.preventDefault(),this.contextMenuPosition.x=e.clientX+"px",this.contextMenuPosition.y=e.clientY+"px",void 0!==this.contextMenu&&null!==this.contextMenu.menu&&(this.contextMenu.menuData={item:i},this.contextMenu.menu.focusFirstItem("mouse"),this.contextMenu.openMenu())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.eN),t.Y36(u.uw),t.Y36(_),t.Y36(N.ux),t.Y36(v.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(D.NW,7),t.Gf(Z.YE,7),t.Gf(Q,7),t.Gf(g.p6,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.paginator=o.first),t.iGM(o=t.CRH())&&(i.sort=o.first),t.iGM(o=t.CRH())&&(i.filter=o.first),t.iGM(o=t.CRH())&&(i.contextMenu=o.first)}},features:[t._Bn([{provide:k.Ad,useValue:"en-GB"}]),t.qOj],decls:82,vars:17,consts:[[1,"content"],[1,"content-block"],["class","block-header",4,"ngFor","ngForOf"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"materialTableHeader"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-title"],[1,"tbl-search-box"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","search name, phone, address, place...","type","text","aria-label","Search box",1,"browser-default","search-field"],["filter",""],[1,"right"],[1,"tbl-export-btn"],[1,"tbl-header-btn"],["matTooltip","ADD",1,"m-l-10"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],["matTooltip","REFRESH",1,"m-l-10"],["matTooltip","DELETE",1,"m-l-10",3,"hidden"],["mat-mini-fab","","color","warn",3,"click"],["matTooltip","XLSX",1,"export-button","m-l-10"],["src","assets/images/icons/xlsx.png","alt","",3,"click"],[1,"body","overflow-auto"],[1,"table-responsive"],["mat-table","","matSort","",1,"table","mat-cell",3,"dataSource"],["table",""],["matColumnDef","select"],[3,"ngClass",4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],["matColumnDef","name"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","place"],[3,"contextmenu",4,"matCellDef"],["matColumnDef","address"],["matColumnDef","generators"],["matColumnDef","pending"],["matColumnDef","received"],["matColumnDef","percentage"],["matColumnDef","total"],["matColumnDef","actions"],["class","pr-0",4,"matHeaderCellDef"],["class","pr-0",4,"matCellDef"],[4,"matHeaderRowDef"],["matRipple","",3,"cursor","click",4,"matRowDef","matRowDefColumns"],["class","tbl-spinner",4,"ngIf"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["contextMenu","matMenu"],["matMenuContent",""],["class","no-results",3,"display",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],[1,"block-header"],[3,"title","items","active_item"],[3,"ngClass"],[3,"checked","indeterminate","ngClass","change"],[3,"checked","ngClass","click","change"],["mat-sort-header",""],[3,"contextmenu"],[1,"mobile-label"],["mode","determinate",1,"flex-fill",3,"value","color"],[1,"pr-0"],["mat-icon-button","","color","primary",1,"tbl-action-btn",3,"click"],["matRipple","",3,"click"],[1,"tbl-spinner"],["color","primary","mode","indeterminate",3,"diameter"],["mat-menu-item","",3,"click"],[1,"no-results"]],template:function(e,i){if(1&e&&(t.TgZ(0,"section",0)(1,"div",1),t.YNc(2,F,2,3,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"ul",8)(9,"li",9)(10,"h2"),t._uU(11,"Generators"),t.qZA()(),t.TgZ(12,"li",10)(13,"label",11)(14,"i",12),t._uU(15,"search"),t.qZA()(),t._UZ(16,"input",13,14),t.qZA()()(),t.TgZ(18,"div",15)(19,"ul",16)(20,"li",17)(21,"div",18)(22,"button",19),t.NdJ("click",function(){return i.addNew()}),t.TgZ(23,"mat-icon",20),t._uU(24,"add"),t.qZA()()()(),t.TgZ(25,"li",17)(26,"div",21)(27,"button",19),t.NdJ("click",function(){return i.refresh()}),t.TgZ(28,"mat-icon",20),t._uU(29,"refresh"),t.qZA()()()(),t.TgZ(30,"li",17)(31,"div",22)(32,"button",23),t.NdJ("click",function(){return i.removeSelectedRows()}),t.TgZ(33,"mat-icon",20),t._uU(34,"delete "),t.qZA()()()(),t.TgZ(35,"li")(36,"div",24)(37,"img",25),t.NdJ("click",function(){return i.exportExcel()}),t.qZA()()()()()(),t.TgZ(38,"div",26)(39,"div",27)(40,"table",28,29),t.ynx(42,30),t.YNc(43,B,2,4,"mat-header-cell",31),t.YNc(44,O,2,3,"mat-cell",32),t.BQk(),t.ynx(45,33),t.YNc(46,H,2,0,"mat-header-cell",34),t.YNc(47,$,2,1,"mat-cell",35),t.BQk(),t.ynx(48,36),t.YNc(49,j,2,0,"mat-header-cell",34),t.YNc(50,K,4,1,"mat-cell",37),t.BQk(),t.ynx(51,38),t.YNc(52,X,2,0,"mat-header-cell",34),t.YNc(53,z,4,1,"mat-cell",37),t.BQk(),t.ynx(54,39),t.YNc(55,V,2,0,"mat-header-cell",34),t.YNc(56,W,4,0,"mat-cell",37),t.BQk(),t.ynx(57,40),t.YNc(58,tt,2,0,"mat-header-cell",34),t.YNc(59,et,4,1,"mat-cell",37),t.BQk(),t.ynx(60,41),t.YNc(61,nt,2,0,"mat-header-cell",34),t.YNc(62,it,4,1,"mat-cell",37),t.BQk(),t.ynx(63,42),t.YNc(64,ot,2,0,"mat-header-cell",34),t.YNc(65,at,5,3,"mat-cell",37),t.BQk(),t.ynx(66,43),t.YNc(67,st,2,0,"mat-header-cell",34),t.YNc(68,rt,4,1,"mat-cell",37),t.BQk(),t.ynx(69,44),t.YNc(70,lt,2,0,"mat-header-cell",45),t.YNc(71,ct,7,3,"mat-cell",46),t.BQk(),t.YNc(72,mt,1,0,"mat-header-row",47),t.YNc(73,dt,1,2,"mat-row",48),t.qZA()(),t.YNc(74,ut,2,1,"div",49),t._UZ(75,"div",50),t.TgZ(76,"mat-menu",null,51),t.YNc(78,pt,10,2,"ng-template",52),t.qZA(),t.YNc(79,ht,2,2,"div",53),t._UZ(80,"mat-paginator",54,55),t.qZA()()()()()()),2&e){const o=t.MAs(77);t.xp6(2),t.Q6J("ngForOf",i.breadscrums),t.xp6(29),t.Q6J("hidden",!i.selection.hasValue()),t.xp6(9),t.Q6J("dataSource",i.dataSource),t.xp6(32),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",null==i.exampleDatabase?null:i.exampleDatabase.isTblLoading),t.xp6(1),t.Udp("left",i.contextMenuPosition.x)("top",i.contextMenuPosition.y),t.Q6J("matMenuTriggerFor",o),t.xp6(4),t.Q6J("ngIf",!(null!=i.exampleDatabase&&i.exampleDatabase.isTblLoading)),t.xp6(1),t.Q6J("length",i.dataSource.filteredData.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",t.DdM(16,gt))}},dependencies:[p.mk,p.sg,p.O5,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,D.NW,C.RK,C.nh,U.Hw,y.oG,L.Ou,Z.YE,Z.nU,g.VK,g.OP,g.KA,g.p6,E.gM,S.L,q.pW]}),n})();class _t extends A.o2{get filter(){return this.filterChange.value}set filter(a){this.filterChange.next(a)}constructor(a,e,i){super(),this.exampleDatabase=a,this.paginator=e,this._sort=i,this.filterChange=new f.X(""),this.filteredData=[],this.renderedData=[],this.filterChange.subscribe(()=>this.paginator.pageIndex=0)}connect(){const a=[this.exampleDatabase.dataChange,this._sort.sortChange,this.filterChange,this.paginator.page];return this.exampleDatabase.getAllAdvanceTables(),(0,R.T)(...a).pipe((0,I.U)(()=>{this.filteredData=this.exampleDatabase.data.slice().filter(o=>-1!==(o.name+o.company+o.place+o.address+o.contactPerson1+o.phone1+o.contactPerson2+o.phone2).toLowerCase().indexOf(this.filter.toLowerCase()));const e=this.sortData(this.filteredData.slice());return this.renderedData=e.splice(this.paginator.pageIndex*this.paginator.pageSize,this.paginator.pageSize),this.renderedData}))}disconnect(){}sortData(a){return this._sort.active&&""!==this._sort.direction?a.sort((e,i)=>{let o="",s="";switch(this._sort.active){case"name":[o,s]=[e.name,i.name];break;case"pending":[o,s]=[e.getPending(),i.getPending()];break;case"received":[o,s]=[e.getReceived(),i.getReceived()];break;case"total":[o,s]=[e.total,i.total];break;case"percentage":[o,s]=[e.amountProgress.progress,i.amountProgress.progress]}return((isNaN(+o)?o:+o)<(isNaN(+s)?s:+s)?-1:1)*("asc"===this._sort.direction?1:-1)}):a}}var x=r(9549),P=r(4144);function Ct(n,a){if(1&n&&(t.TgZ(0,"div",25),t._UZ(1,"app-breadcrumb",26),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("title",e.title)("items",e.items)("active_item",e.active)}}function xt(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Name is required "),t.qZA())}function vt(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Name is required "),t.qZA())}const Zt=[{path:"",component:ft},{path:"new",component:(()=>{class n extends T.n{constructor(e,i,o,s,l,c){super(),this.httpClient=e,this.customerService=i,this.snackBar=o,this.router=s,this.location=l,this.fb=c,this.isEditMode=!1,this.isErrorSub=!1,this.isNewGenSub=!1,this.phaseVal="",this.breadscrums=[{title:"Generators",items:["Generators"],active:"New"}],this.data=this.location.getState(),this.action=this.data.action,"edit"===this.action?(this.isEditMode=!0,this.breadscrums[0].active="Edit "+this.data.customer.id,this.dialogTitle=this.data.customer.id,this.customer=new h(this.data.customer)):"add"==this.action?(this.isEditMode=!0,this.dialogTitle="New Generator",this.customer=new h({})):(this.isEditMode=!1,this.dialogTitle=this.data.customer.id,this.breadscrums[0].active=this.data.customer.id,this.customer=new h(this.data.customer)),this.basicDetailsGroup=this.createBasicFormGroup()}ngOnInit(){this.newGenSubs=this.customerService.newGen.subscribe({next:e=>{this.isNewGenSub?(this.customer=e,this.showNotification("snackbar-success","Customer saved successfully","bottom","center"),this.isEditMode=!1):this.isNewGenSub=!0}}),this.errorSubs=this.customerService.errors.subscribe({next:e=>{this.isErrorSub?this.showNotification("snackbar-danger",e.error,"bottom","center"):this.isErrorSub=!0}})}showNotification(e,i,o,s){this.snackBar.open(i,"",{duration:2e3,verticalPosition:o,horizontalPosition:s,panelClass:e})}ngOnDestroy(){super.ngOnDestroy(),this.isErrorSub&&(this.errorSubs?.unsubscribe(),this.isErrorSub=!1),this.isNewGenSub&&(this.newGenSubs?.unsubscribe(),this.isNewGenSub=!1)}createBasicFormGroup(){return this.fb.group({id:[this.customer.id],name:[this.customer.name,[m.kI.required]],company:[this.customer.company],contactPerson1:[this.customer.contactPerson1,[m.kI.required]],phone1:[this.customer.phone1,[m.kI.required]],contactPerson2:[this.customer.contactPerson2],phone2:[this.customer.phone2],place:[this.customer.place,[m.kI.required]],address:[this.customer.address],ePending:[this.customer.ePending,[m.kI.required]],eReceived:[this.customer.eReceived,[m.kI.required]]})}confirmAdd(){const e=new h(this.basicDetailsGroup.getRawValue());"edit"===this.action?(e.id="0",this.customerService.updateAdvanceTable(this.dialogTitle,e)):(e.id="0",this.customerService.addAdvanceTable(e))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.eN),t.Y36(_),t.Y36(N.ux),t.Y36(v.F0),t.Y36(p.Ye),t.Y36(m.QS))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-new"]],features:[t.qOj],decls:91,vars:5,consts:[[1,"content"],[1,"content-block"],["class","block-header",4,"ngFor","ngForOf"],[1,"row"],[1,"card"],[1,"header"],[1,"body"],[1,"m-4",3,"formGroup"],["appearance","fill",1,"example-full-width"],["matInput","","formControlName","name","required",""],["matSuffix",""],[4,"ngIf"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["matInput","","formControlName","place"],["matInput","","formControlName","company"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["matInput","","formControlName","address"],["matInput","","formControlName","contactPerson1"],["matInput","","formControlName","phone1","type","number"],["matInput","","formControlName","contactPerson2"],["matInput","","formControlName","phone2","type","number"],["matInput","","formControlName","ePending","type","number"],["matInput","","formControlName","eReceived","type","number"],["mat-raised-button","","color","primary",1,"btn-space",3,"disabled","click"],["type","button","mat-raised-button","","color","warn"],[1,"block-header"],[3,"title","items","active_item"]],template:function(e,i){if(1&e&&(t.TgZ(0,"section",0)(1,"div",1),t.YNc(2,Ct,2,3,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7,"New Customer"),t.qZA()(),t.TgZ(8,"div",6)(9,"form",7)(10,"div",3)(11,"mat-form-field",8)(12,"mat-label"),t._uU(13,"Full Name"),t.qZA(),t._UZ(14,"input",9),t.TgZ(15,"mat-icon",10),t._uU(16,"face"),t.qZA(),t.YNc(17,xt,2,0,"mat-error",11),t.qZA()(),t.TgZ(18,"div",3)(19,"div",12)(20,"mat-form-field",8)(21,"mat-label"),t._uU(22,"Place"),t.qZA(),t._UZ(23,"input",13),t.TgZ(24,"mat-icon",10),t._uU(25,"face"),t.qZA(),t.YNc(26,vt,2,0,"mat-error",11),t.qZA()(),t.TgZ(27,"div",12)(28,"mat-form-field",8)(29,"mat-label"),t._uU(30,"Company"),t.qZA(),t._UZ(31,"input",14),t.TgZ(32,"mat-icon",10),t._uU(33,"face"),t.qZA()()()(),t.TgZ(34,"div",3)(35,"div",15)(36,"mat-form-field",8)(37,"mat-label"),t._uU(38,"Address"),t.qZA(),t._UZ(39,"textarea",16),t.qZA()()(),t.TgZ(40,"div",3)(41,"div",12)(42,"mat-form-field",8)(43,"mat-label"),t._uU(44,"Contact 1"),t.qZA(),t._UZ(45,"input",17),t.TgZ(46,"mat-icon",10),t._uU(47,"face"),t.qZA()()(),t.TgZ(48,"div",12)(49,"mat-form-field",8)(50,"mat-label"),t._uU(51,"Phone 1"),t.qZA(),t._UZ(52,"input",18),t.TgZ(53,"mat-icon",10),t._uU(54,"phone"),t.qZA()()()(),t.TgZ(55,"div",3)(56,"div",12)(57,"mat-form-field",8)(58,"mat-label"),t._uU(59,"Contact 2"),t.qZA(),t._UZ(60,"input",19),t.TgZ(61,"mat-icon",10),t._uU(62,"face"),t.qZA()()(),t.TgZ(63,"div",12)(64,"mat-form-field",8)(65,"mat-label"),t._uU(66,"Phone 2"),t.qZA(),t._UZ(67,"input",20),t.TgZ(68,"mat-icon",10),t._uU(69,"phone"),t.qZA()()()(),t.TgZ(70,"div",3)(71,"div",12)(72,"mat-form-field",8)(73,"mat-label"),t._uU(74,"Pending amount (Existing only)"),t.qZA(),t._UZ(75,"input",21),t.TgZ(76,"mat-icon",10),t._uU(77,"face"),t.qZA()()(),t.TgZ(78,"div",12)(79,"mat-form-field",8)(80,"mat-label"),t._uU(81,"Received amount (Existing only)"),t.qZA(),t._UZ(82,"input",22),t.TgZ(83,"mat-icon",10),t._uU(84,"phone"),t.qZA()()()(),t.TgZ(85,"div",3)(86,"div",15)(87,"button",23),t.NdJ("click",function(){return i.confirmAdd()}),t._uU(88,"Add customer"),t.qZA(),t.TgZ(89,"button",24),t._uU(90,"Cancel"),t.qZA()()()()()()()()()),2&e){let o,s;t.xp6(2),t.Q6J("ngForOf",i.breadscrums),t.xp6(7),t.Q6J("formGroup",i.basicDetailsGroup),t.xp6(8),t.Q6J("ngIf",null==i.basicDetailsGroup||null==(o=i.basicDetailsGroup.get("first"))?null:o.hasError("required")),t.xp6(9),t.Q6J("ngIf",null==i.basicDetailsGroup||null==(s=i.basicDetailsGroup.get("first"))?null:s.hasError("required")),t.xp6(61),t.Q6J("disabled",!i.basicDetailsGroup.valid)}},dependencies:[p.sg,p.O5,m._Y,m.Fj,m.wV,m.JJ,m.JL,m.Q7,m.sg,m.u,x.KE,x.hX,x.TO,x.R9,P.Nt,C.lW,U.Hw,S.L]}),n})()}];let bt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[v.Bz.forChild(Zt),v.Bz]}),n})();var Tt=r(1948),At=r(4385),Dt=r(3546),Nt=r(9602),Ut=r(3683),wt=r(1783),yt=r(5626),Lt=r(6257);let St=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[_],imports:[p.ez,m.u5,m.UX,bt,d.p0,D.TU,x.lN,P.c,N.ZX,C.ot,U.Ps,Tt.Fk,At.LD,y.p9,Dt.QW,Nt.FA,L.Cq,u.Is,Z.JX,Ut.g0,g.Tx,wt.m,yt.K,Lt.T5,q.Cv]}),n})()}}]);
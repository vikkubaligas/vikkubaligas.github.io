"use strict";(self.webpackChunkaxen=self.webpackChunkaxen||[]).push([[637],{6637:(gt,g,s)=>{s.r(g),s.d(g,{ActivitiesModule:()=>vt});var m=s(6895),h=s(9299),p=s(3238),A=s(9186),C=s(5017),u=s(8739),d=s(6308),x=s(1561),N=s(4968),T=s(1135),Y=s(6451),Q=s(4004),O=s(2340);class R{constructor(a){this.id=a.id||0,this.act_id=a.act_id||"",this.title=a.title||"",this.last_modified=new Date(a.last_modified).valueOf()||0,this.content=a.content||"",this.act_type=a.act_type||"",this.username=a.username||""}}var t=s(4650),Z=s(529);let f=(()=>{class e extends A.n{constructor(i){super(),this.httpClient=i,this.API_URL=O.N.apiUrl+"/activities",this.isTblLoading=!0,this.dataChange=new T.X([])}get data(){return this.dataChange.value}getAllAdvanceTables(){this.subs.sink=this.httpClient.get(this.API_URL).subscribe({next:i=>{i=i.map(n=>Object.assign(new R(n),n)),this.isTblLoading=!1,this.dataChange.next(i)},error:i=>{this.isTblLoading=!1,console.log(i)}})}}return e.\u0275fac=function(i){return new(i||e)(t.LFG(Z.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var b=s(5938),D=s(7009),o=s(7155),L=s(4859),y=s(7392),S=s(6709),U=s(1572),J=s(266),M=s(1299);const w=["filter"];function B(e,a){if(1&e&&(t.TgZ(0,"div",42),t._UZ(1,"app-breadcrumb",43),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Q6J("title",i.title)("items",i.items)("active_item",i.active)}}function G(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"mat-header-cell",44)(1,"mat-checkbox",45),t.NdJ("change",function(l){t.CHM(i);const c=t.oxw();return t.KtG(l?c.masterToggle():null)}),t.qZA()()}if(2&e){const i=t.oxw();t.Q6J("ngClass","tbl-col-width-per-6"),t.xp6(1),t.Q6J("checked",i.selection.hasValue()&&i.isAllSelected())("indeterminate",i.selection.hasValue()&&!i.isAllSelected())("ngClass","tbl-checkbox")}}function F(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"mat-cell",44)(1,"mat-checkbox",46),t.NdJ("click",function(l){return l.stopPropagation()})("change",function(l){const r=t.CHM(i).$implicit,v=t.oxw();return t.KtG(l?v.selection.toggle(r):null)}),t.qZA()()}if(2&e){const i=a.$implicit,n=t.oxw();t.Q6J("ngClass","tbl-col-width-per-6"),t.xp6(1),t.Q6J("checked",n.selection.isSelected(i))("ngClass","tbl-checkbox")}}function z(e,a){1&e&&(t.TgZ(0,"mat-header-cell",47),t._uU(1,"Title"),t.qZA())}function H(e,a){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.title)}}function I(e,a){1&e&&(t.TgZ(0,"mat-header-cell",47),t._uU(1,"Content"),t.qZA())}function E(e,a){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",30),t._uU(2,"Content:"),t.qZA(),t._uU(3),t.qZA()),2&e){const i=a.$implicit;t.xp6(3),t.Oqu(i.content)}}function _(e,a){1&e&&(t.TgZ(0,"mat-header-cell",47),t._uU(1,"Type"),t.qZA())}function $(e,a){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",30),t._uU(2,"Type:"),t.qZA(),t._uU(3),t.qZA()),2&e){const i=a.$implicit;t.xp6(3),t.Oqu(i.act_type)}}function j(e,a){1&e&&(t.TgZ(0,"mat-header-cell",47),t._uU(1,"User"),t.qZA())}function k(e,a){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",30),t._uU(2,"User:"),t.qZA(),t._uU(3),t.qZA()),2&e){const i=a.$implicit;t.xp6(3),t.Oqu(i.username)}}function P(e,a){1&e&&(t.TgZ(0,"mat-header-cell",47),t._uU(1,"Time"),t.qZA())}function X(e,a){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",30),t._uU(2,"Time:"),t.qZA(),t._uU(3),t.qZA()),2&e){const i=a.$implicit;t.xp6(3),t.hij(" ",i.last_modified," ")}}function K(e,a){1&e&&t._UZ(0,"mat-header-row")}function V(e,a){1&e&&t._UZ(0,"mat-row",48),2&e&&t.Udp("cursor","pointer")}function W(e,a){1&e&&(t.TgZ(0,"div",49),t._UZ(1,"mat-progress-spinner",50),t.qZA()),2&e&&(t.xp6(1),t.Q6J("diameter",40))}function q(e,a){if(1&e&&(t.TgZ(0,"div",51),t._uU(1," No results "),t.qZA()),2&e){const i=t.oxw();t.Udp("display",0===i.dataSource.renderedData.length?"":"none")}}const tt=function(){return[5,10,25,100]};let et=(()=>{class e extends A.n{constructor(i,n,l,c,r){super(),this.httpClient=i,this.dialog=n,this.customerService=l,this.snackBar=c,this.router=r,this.displayedColumns=["title","content","type","username","time"],this.selection=new C.Ov(!0,[]),this.breadscrums=[{title:"Activity Log",items:["Activity"],active:"All"}],this.contextMenuPosition={x:"0px",y:"0px"}}ngOnInit(){this.loadData()}refresh(){this.loadData()}refreshTable(){this.paginator._changePageSize(this.paginator.pageSize)}isAllSelected(){return this.selection.selected.length===this.dataSource.renderedData.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.renderedData.forEach(i=>this.selection.select(i))}loadData(){this.exampleDatabase=new f(this.httpClient),this.dataSource=new it(this.exampleDatabase,this.paginator,this.sort),this.subs.sink=(0,N.R)(this.filter.nativeElement,"keyup").subscribe(()=>{this.dataSource&&(this.dataSource.filter=this.filter.nativeElement.value)})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(Z.eN),t.Y36(b.uw),t.Y36(f),t.Y36(D.ux),t.Y36(h.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-activities"]],viewQuery:function(i,n){if(1&i&&(t.Gf(u.NW,7),t.Gf(d.YE,7),t.Gf(w,7),t.Gf(x.p6,5)),2&i){let l;t.iGM(l=t.CRH())&&(n.paginator=l.first),t.iGM(l=t.CRH())&&(n.sort=l.first),t.iGM(l=t.CRH())&&(n.filter=l.first),t.iGM(l=t.CRH())&&(n.contextMenu=l.first)}},features:[t._Bn([{provide:p.Ad,useValue:"en-GB"}]),t.qOj],decls:55,vars:11,consts:[[1,"content"],[1,"content-block"],["class","block-header",4,"ngFor","ngForOf"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"materialTableHeader"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-title"],[1,"tbl-search-box"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","search name, phone, address, place...","type","text","aria-label","Search box",1,"browser-default","search-field"],["filter",""],[1,"right"],[1,"tbl-export-btn"],[1,"tbl-header-btn"],["matTooltip","REFRESH",1,"m-l-10"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],[1,"body","overflow-auto"],[1,"table-responsive"],["mat-table","","matSort","",1,"table","mat-cell",3,"dataSource"],["table",""],["matColumnDef","select"],[3,"ngClass",4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],["matColumnDef","title"],["mat-sort-header","",4,"matHeaderCellDef"],[1,"mobile-label"],[4,"matCellDef"],["matColumnDef","content"],["matColumnDef","type"],["matColumnDef","username"],["matColumnDef","time"],[4,"matHeaderRowDef"],["matRipple","",3,"cursor",4,"matRowDef","matRowDefColumns"],["class","tbl-spinner",4,"ngIf"],["class","no-results",3,"display",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],[1,"block-header"],[3,"title","items","active_item"],[3,"ngClass"],[3,"checked","indeterminate","ngClass","change"],[3,"checked","ngClass","click","change"],["mat-sort-header",""],["matRipple",""],[1,"tbl-spinner"],["color","primary","mode","indeterminate",3,"diameter"],[1,"no-results"]],template:function(i,n){1&i&&(t.TgZ(0,"section",0)(1,"div",1),t.YNc(2,B,2,3,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"ul",8)(9,"li",9)(10,"h2"),t._uU(11,"Generators"),t.qZA()(),t.TgZ(12,"li",10)(13,"label",11)(14,"i",12),t._uU(15,"search"),t.qZA()(),t._UZ(16,"input",13,14),t.qZA()()(),t.TgZ(18,"div",15)(19,"ul",16)(20,"li",17)(21,"div",18)(22,"button",19),t.NdJ("click",function(){return n.refresh()}),t.TgZ(23,"mat-icon",20),t._uU(24,"refresh"),t.qZA()()()()()()(),t.TgZ(25,"div",21)(26,"div",22)(27,"table",23,24),t.ynx(29,25),t.YNc(30,G,2,4,"mat-header-cell",26),t.YNc(31,F,2,3,"mat-cell",27),t.BQk(),t.ynx(32,28),t.YNc(33,z,2,0,"mat-header-cell",29),t.TgZ(34,"span",30),t._uU(35,"Title:"),t.qZA(),t.YNc(36,H,2,1,"mat-cell",31),t.BQk(),t.ynx(37,32),t.YNc(38,I,2,0,"mat-header-cell",29),t.YNc(39,E,4,1,"mat-cell",31),t.BQk(),t.ynx(40,33),t.YNc(41,_,2,0,"mat-header-cell",29),t.YNc(42,$,4,1,"mat-cell",31),t.BQk(),t.ynx(43,34),t.YNc(44,j,2,0,"mat-header-cell",29),t.YNc(45,k,4,1,"mat-cell",31),t.BQk(),t.ynx(46,35),t.YNc(47,P,2,0,"mat-header-cell",29),t.YNc(48,X,4,1,"mat-cell",31),t.BQk(),t.YNc(49,K,1,0,"mat-header-row",36),t.YNc(50,V,1,2,"mat-row",37),t.qZA()(),t.YNc(51,W,2,1,"div",38),t.YNc(52,q,2,2,"div",39),t._UZ(53,"mat-paginator",40,41),t.qZA()()()()()()),2&i&&(t.xp6(2),t.Q6J("ngForOf",n.breadscrums),t.xp6(25),t.Q6J("dataSource",n.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",null==n.exampleDatabase?null:n.exampleDatabase.isTblLoading),t.xp6(1),t.Q6J("ngIf",!(null!=n.exampleDatabase&&n.exampleDatabase.isTblLoading)),t.xp6(1),t.Q6J("length",n.dataSource.filteredData.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",t.DdM(10,tt)))},dependencies:[m.mk,m.sg,m.O5,o.BZ,o.fO,o.as,o.w1,o.Dz,o.nj,o.ge,o.ev,o.XQ,o.Gk,u.NW,L.nh,y.Hw,S.oG,U.Ou,d.YE,d.nU,J.gM,M.L,p.wG]}),e})();class it extends C.o2{get filter(){return this.filterChange.value}set filter(a){this.filterChange.next(a)}constructor(a,i,n){super(),this.exampleDatabase=a,this.paginator=i,this._sort=n,this.filterChange=new T.X(""),this.filteredData=[],this.renderedData=[],this.filterChange.subscribe(()=>this.paginator.pageIndex=0)}connect(){const a=[this.exampleDatabase.dataChange,this._sort.sortChange,this.filterChange,this.paginator.page];return this.exampleDatabase.getAllAdvanceTables(),(0,Y.T)(...a).pipe((0,Q.U)(()=>{this.filteredData=this.exampleDatabase.data.slice().filter(l=>-1!==(l.username+l.title+l.content+l.act_type).toLowerCase().indexOf(this.filter.toLowerCase()));const i=this.sortData(this.filteredData.slice());return this.renderedData=i.splice(this.paginator.pageIndex*this.paginator.pageSize,this.paginator.pageSize),this.renderedData}))}disconnect(){}sortData(a){return this._sort.active&&""!==this._sort.direction?a.sort((i,n)=>{let l="",c="";switch(this._sort.active){case"title":[l,c]=[i.title,n.title];break;case"time":[l,c]=[new Date(i.last_modified).valueOf(),new Date(i.last_modified).valueOf()]}return((isNaN(+l)?l:+l)<(isNaN(+c)?c:+c)?-1:1)*("asc"===this._sort.direction?1:-1)}):a}}const at=[{path:"",component:et}];let st=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.Bz.forChild(at),h.Bz]}),e})();var nt=s(9549),lt=s(4144),ot=s(1948),ct=s(4385),rt=s(3546),mt=s(9602),dt=s(3683),ht=s(1783),pt=s(5626),ut=s(6257),ft=s(3162);let vt=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[f],imports:[m.ez,st,o.p0,u.TU,nt.lN,lt.c,D.ZX,L.ot,y.Ps,ot.Fk,ct.LD,S.p9,rt.QW,mt.FA,U.Cq,b.Is,d.JX,dt.g0,x.Tx,ht.m,pt.K,ut.T5,ft.Cv,p.si]}),e})()}}]);
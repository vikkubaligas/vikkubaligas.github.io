"use strict";(self.webpackChunkaxen=self.webpackChunkaxen||[]).push([[592],{2759:(p,c,a)=>{a.d(c,{T:()=>b});var r=a(1135),h=a(7930),u=a(529),e=a(9186),n=a(2340),l=a(4650);let b=(()=>{class o extends e.n{constructor(s){super(),this.httpClient=s,this.API_URL=n.N.apiUrl+"/generators",this.isTblLoading=!0,this.dataChange=new r.X([]),this.genId=new r.X(""),this.newGen=new r.X(new h.R({})),this.errors=new r.X({})}get data(){return this.dataChange.value}getDialogData(){return this.dialogData}getAllAdvanceTables(){this.subs.sink=this.httpClient.get(this.API_URL).subscribe({next:s=>{s=s.map(i=>Object.assign(new h.R(i),i)),this.isTblLoading=!1,this.dataChange.next(s)},error:s=>{this.isTblLoading=!1,console.log(s)}})}addAdvanceTable(s){const i=new u.WM;i.append("Content-Type","application/json"),this.httpClient.post(this.API_URL,s,{headers:i}).subscribe({next:t=>{t.id?(this.dialogData=new h.R(t),this.newGen.next(this.dialogData)):this.errors.next(t)},error:t=>{this.errors.next(t)}})}updateAdvanceTable(s,i){this.httpClient.put(this.API_URL+"/"+s,i).subscribe({next:t=>{t.id?(this.dialogData=t,this.newGen.next(this.dialogData)):this.errors.next(t)},error:t=>{this.errors.next(t)}})}deleteAdvanceTable(s){this.httpClient.delete(this.API_URL+"/"+s).subscribe({next:i=>{},error:i=>{console.log(i)}})}getGenId(s,i,t){this.httpClient.post(this.API_URL+"/id",{companyName:s,kw:i,is3Phase:t}).subscribe({next:d=>{this.genId.next(d)},error:d=>{console.log(d)}})}}return o.\u0275fac=function(s){return new(s||o)(l.LFG(u.eN))},o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac}),o})()},7930:(p,c,a)=>{a.d(c,{R:()=>h});var r=a(6895);class h{constructor(e){this.serviceProgress={progress:0,overShoot:0,ngclass:"",health:0,color:"",color2:""},this.maintenanceProgress={progress:0,overShoot:0,ngclass:"",health:0,daysRemain:"",totalDays:0,color:"",color2:""},this.id=e.id||"",this.model=e.model||"",this.companyName=e.companyName||"",this.kw=e.kw||0,this.serialNumber=e.serialNumber||"",this.dateOfMnf=(0,r.p6)(e.dateOfMnf||new Date,"YYYY-MM-ddTHH:mm:ss.SSSZ","en"),this.is3Phase=e.is3Phase||!1,this.inRent=e.inRent||!1,this.inService=e.inService||!1,this.forMaintenance=e.forMaintenance||!1,this.oilChangeDuration=e.oilChangeDuration||500,this.prevOilHour=e.prevOilHour||0,this.prevOilDate=(0,r.p6)(e.prevOilDate||new Date,"YYYY-MM-ddTHH:mm:ss.SSSZ","en"),this.hoursRun=e.hoursRun||0,this.oilVol=e.oilVol||0,this.fuelFilterNumber=e.fuelFilterNumber||"",this.oilFilterNumber=e.oilFilterNumber||"",this.airFilterNumber=e.airFilterNumber||"",this.beltNumber=e.beltNumber||"",this.batteryCompanyName=e.batteryCompanyName||"",this.batteryCapacity=e.batteryCapacity||0,this.replaceDurationMonths=e.replaceDurationMonths||36,this.batterySerialNumber=e.batterySerialNumber||"",this.installationDate=(0,r.p6)(e.installationDate||new Date,"YYYY-MM-ddTHH:mm:ss.SSSZ","en"),this.lastServiceDate=(0,r.p6)(new Date,"MMM d, y","en"),this.calculateProgress()}fillValuesFromService(e){this.oilChangeDuration=e.oilChangeDuration||500,this.prevOilHour=e.prevOilHour||0,this.prevOilDate=(0,r.p6)(e.prevOilDate||new Date,"YYYY-MM-ddTHH:mm:ss.SSSZ","en"),this.hoursRun=e.hoursRun||0,this.oilVol=e.oilVol||0,this.fuelFilterNumber=e.fuelFilterNumber||"",this.oilFilterNumber=e.oilFilterNumber||"",this.airFilterNumber=e.airFilterNumber||"",this.beltNumber=e.beltNumber||""}fillValuesFromBattery(e){this.batteryCompanyName=e.batteryCompanyName||"",this.batteryCapacity=e.batteryCapacity||0,this.replaceDurationMonths=e.replaceDurationMonths||36,this.batterySerialNumber=e.batterySerialNumber||"",this.installationDate=(0,r.p6)(e.installationDate||new Date,"YYYY-MM-ddTHH:mm:ss.SSSZ","en")}getStatus(){return this.inRent?"Rented":this.inService?"Under service":this.forMaintenance?"Under maintenance":"Available"}getRemainingHours(){const e=this.oilChangeDuration-(this.hoursRun-this.prevOilHour);return e<0?0:e}calculateProgress(){let e=100*(this.hoursRun-this.prevOilHour)/this.oilChangeDuration;e=Math.trunc(e),this.serviceProgress.health=100-Math.min(100,e),e>100&&(this.serviceProgress.overShoot=1),e=this.serviceProgress.health,this.serviceProgress.progress=e,this.serviceProgress.color=1==this.serviceProgress.overShoot||e<10?"danger":e<20?"warning":"success",this.serviceProgress.color2=1==this.serviceProgress.overShoot||e<20?"warn":"primary",this.serviceProgress.ngclass="progress-bar progress-bar-"+this.serviceProgress.color+" width-per-"+e;let n=((new Date).valueOf()-new Date(this.installationDate).valueOf())/864e5;this.maintenanceProgress.totalDays=30*this.replaceDurationMonths,e=100*n/this.maintenanceProgress.totalDays,e=Math.trunc(e),n=Math.trunc(n);const l=this.maintenanceProgress.totalDays-Math.trunc(n);this.maintenanceProgress.daysRemain=Math.trunc(l/30)+" m, "+Math.trunc(l%30),this.maintenanceProgress.totalDays=this.replaceDurationMonths,this.maintenanceProgress.health=100-Math.min(100,e),e>100&&(this.maintenanceProgress.overShoot=1),this.maintenanceProgress.progress=this.maintenanceProgress.health,e=this.maintenanceProgress.progress,this.maintenanceProgress.color=1==this.maintenanceProgress.overShoot||e<5?"danger":e<10?"warning":"success",this.maintenanceProgress.color2=1==this.maintenanceProgress.overShoot||e>10?"warn":"primary",this.maintenanceProgress.ngclass="progress-bar progress-bar-"+this.maintenanceProgress.color+" width-per-"+this.maintenanceProgress.progress}}}}]);
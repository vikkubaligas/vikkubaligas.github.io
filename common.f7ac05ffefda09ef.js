"use strict";(self.webpackChunkaxen=self.webpackChunkaxen||[]).push([[592],{2759:(d,l,r)=>{r.d(l,{T:()=>p});var a=r(1135),h=r(7930),c=r(529),e=r(9186),n=r(2340),b=r(4650);let p=(()=>{class o extends e.n{constructor(t){super(),this.httpClient=t,this.API_URL=n.N.apiUrl+"/generators",this.isTblLoading=!0,this.dataChange=new a.X([]),this.genId=new a.X(""),this.newGen=new a.X(new h.R({})),this.errors=new a.X({})}get data(){return this.dataChange.value}getDialogData(){return this.dialogData}getAllAdvanceTables(){this.subs.sink=this.httpClient.get(this.API_URL).subscribe({next:t=>{t=t.map(i=>Object.assign(new h.R(i),i)),this.isTblLoading=!1,this.dataChange.next(t)},error:t=>{this.isTblLoading=!1,console.log(t)}})}addAdvanceTable(t){const i=new c.WM;i.append("Content-Type","application/json"),this.httpClient.post(this.API_URL,t,{headers:i}).subscribe({next:s=>{s.id?(this.dialogData=s,this.newGen.next(this.dialogData)):this.errors.next(s)},error:s=>{this.errors.next(s)}})}updateAdvanceTable(t,i){this.httpClient.put(this.API_URL+"/"+t,i).subscribe({next:s=>{s.id?(this.dialogData=s,this.newGen.next(this.dialogData)):this.errors.next(s)},error:s=>{this.errors.next(s)}})}deleteAdvanceTable(t){this.httpClient.delete(this.API_URL+"/"+t).subscribe({next:i=>{},error:i=>{console.log(i)}})}getGenId(t,i,s){this.httpClient.post(this.API_URL+"/id",{companyName:t,kw:i,is3Phase:s}).subscribe({next:m=>{this.genId.next(m)},error:m=>{console.log(m)}})}}return o.\u0275fac=function(t){return new(t||o)(b.LFG(c.eN))},o.\u0275prov=b.Yz7({token:o,factory:o.\u0275fac}),o})()},7930:(d,l,r)=>{r.d(l,{R:()=>h});var a=r(6895);class h{constructor(e){this.serviceProgress={progress:0,overShoot:0,ngclass:"",health:0,color:"",color2:""},this.maintenanceProgress={progress:0,overShoot:0,ngclass:"",health:0,daysRemain:"",totalDays:0,color:"",color2:""},this.id=e.id||"",this.model=e.model||"",this.companyName=e.companyName||"",this.kw=e.kw||0,this.serialNumber=e.serialNumber||"",this.yearOfMnf=e.yearOfMnf||2020,this.is3Phase=e.is3Phase||!1,this.inRent=e.inRent||!1,this.inService=e.inService||!1,this.forMaintenance=e.forMaintenance||!1,this.oilChangeDuration=e.oilChangeDuration||500,this.prevOilHour=e.prevOilHour||0,this.hoursRun=e.hoursRun||0,this.oilVol=e.oilVol||0,this.fuelFilterNumber=e.fuelFilterNumber||"",this.oilFilterNumber=e.oilFilterNumber||"",this.airFilterNumber=e.airFilterNumber||"",this.beltNumber=e.beltNumber||"",this.batteryCompanyName=e.batteryCompanyName||"",this.batteryCapacity=e.batteryCapacity||0,this.replaceDurationMonths=e.replaceDurationMonths||36,this.batterySerialNumber=e.batterySerialNumber||"",this.installationDate=(0,a.p6)(e.installationDate||new Date,"YYYY-MM-ddTHH:mm:ss.SSSZ","en"),this.lastServiceDate=(0,a.p6)(new Date,"MMM d, y","en"),this.calculateProgress()}fillValuesFromService(e){this.oilChangeDuration=e.oilChangeDuration||500,this.prevOilHour=e.prevOilHour||0,this.hoursRun=e.hoursRun||0,this.oilVol=e.oilVol||0,this.fuelFilterNumber=e.fuelFilterNumber||"",this.oilFilterNumber=e.oilFilterNumber||"",this.airFilterNumber=e.airFilterNumber||"",this.beltNumber=e.beltNumber||""}fillValuesFromBattery(e){this.batteryCompanyName=e.batteryCompanyName||"",this.batteryCapacity=e.batteryCapacity||0,this.replaceDurationMonths=e.replaceDurationMonths||36,this.batterySerialNumber=e.batterySerialNumber||"",this.installationDate=(0,a.p6)(e.installationDate||new Date,"YYYY-MM-ddTHH:mm:ss.SSSZ","en")}getStatus(){return this.inRent?"Rented":this.inService?"Under service":this.forMaintenance?"Under maintenance":"Available"}getRemainingHours(){const e=this.oilChangeDuration-(this.hoursRun-this.prevOilHour);return e<0?0:e}calculateProgress(){let e=100*(this.hoursRun-this.prevOilHour)/this.oilChangeDuration;e=Math.trunc(e),this.serviceProgress.health=100-Math.min(100,e),e>100&&(e=100,this.serviceProgress.overShoot=1),this.serviceProgress.progress=e,this.serviceProgress.color=1==this.serviceProgress.overShoot||e>80?"danger":e>50?"warning":"success",this.serviceProgress.color2=1==this.serviceProgress.overShoot||e>80?"warn":"primary",this.serviceProgress.ngclass="progress-bar progress-bar-"+this.serviceProgress.color+" width-per-"+e;let n=((new Date).valueOf()-new Date(this.installationDate).valueOf())/846e5;this.maintenanceProgress.totalDays=30*this.replaceDurationMonths,e=100*n/this.maintenanceProgress.totalDays,e=Math.trunc(e),n=Math.trunc(n),this.maintenanceProgress.daysRemain=Math.trunc(n/30)+" m, "+Math.trunc(n%30),this.maintenanceProgress.totalDays=this.replaceDurationMonths,this.maintenanceProgress.health=100-Math.min(100,e),e>100&&(e=100,this.maintenanceProgress.overShoot=1),this.maintenanceProgress.progress=e,this.maintenanceProgress.color=1==this.maintenanceProgress.overShoot||e>80?"danger":e>50?"warning":"success",this.maintenanceProgress.color2=1==this.maintenanceProgress.overShoot||e>80?"warn":"primary",this.maintenanceProgress.ngclass="progress-bar progress-bar-"+this.maintenanceProgress.color+" width-per-"+e}}}}]);